### 누적 합 (Prefix Sum) 알고리즘

누적 합 알고리즘은 **배열의 특정 구간의 합을 매우 효율적으로 계산**하기 위해 사용되는 기법입니다. 주어진 배열의 각 위치까지의 원소 합을 미리 계산하여 새로운 배열에 저장해두고, 이를 이용해 어떠한 구간의 합도 단 한 번의 뺄셈 연산으로 빠르게 구할 수 있습니다. ⚡️

---

### ## 상세 설명

#### 1. 누적 합 배열 만들기

먼저, 원본 배열 `A`가 주어졌을 때, 누적 합 배열 `S` (Prefix Sum Array)를 만듭니다. `S[i]`는 `A[0]`부터 `A[i]`까지의 합을 의미합니다.

* `S[0] = A[0]`
* `S[1] = A[0] + A[1] = S[0] + A[1]`
* `S[2] = A[0] + A[1] + A[2] = S[1] + A[2]`
* ...
* `S[i] = A[0] + ... + A[i] = S[i-1] + A[i]`

이를 일반화하면 다음과 같은 점화식을 얻을 수 있습니다.

$S[i] = S[i-1] + A[i] \quad (i > 0)$

**예시:**
원본 배열 `A`가 `[10, 20, 30, 40, 50]` 이라고 할 때, 누적 합 배열 `S`는 다음과 같이 계산됩니다.

* `S[0] = 10`
* `S[1] = 10 + 20 = 30`
* `S[2] = 30 + 30 = 60`
* `S[3] = 60 + 40 = 100`
* `S[4] = 100 + 50 = 150`

따라서 누적 합 배열 `S`는 `[10, 30, 60, 100, 150]`이 됩니다.

#### 2. 구간 합 계산하기

누적 합 배열 `S`를 이용하면, 원본 배열 `A`의 `i`번째 인덱스부터 `j`번째 인덱스까지의 구간 합을 매우 간단하게 계산할 수 있습니다.

* **`i`부터 `j`까지의 합:** `A[i] + ... + A[j]`

이 합은 `(A[0] + ... + A[j])`에서 `(A[0] + ... + A[i-1])`을 뺀 값과 같습니다. 즉, `S[j]`에서 `S[i-1]`을 뺀 것과 동일합니다.

$$\sum_{k=i}^{j} A[k] = S[j] - S[i-1]$$

(단, `i`가 0일 경우, 즉 첫 번째 원소부터의 합은 그냥 `S[j]`가 됩니다.)

**예시:**
위의 예시에서 `A[2]`부터 `A[4]`까지의 합 (30 + 40 + 50)을 구한다고 해봅시다.

* `S[4] = 150`
* `S[2-1] = S[1] = 30`
* 구간 합 = `S[4] - S[1] = 150 - 30 = 120`

실제로 30 + 40 + 50 = 120으로 결과가 정확함을 알 수 있습니다.

---

### ## 정확성 증명

누적 합 알고리즘을 이용한 구간 합 계산이 왜 정확한지 수학적으로 간단히 증명할 수 있습니다.

배열 `A`의 `i`부터 `j`까지의 합을 수식으로 표현하면 다음과 같습니다.

$$\sum_{k=i}^{j} A[k] = A[i] + A[i+1] + \dots + A[j]$$

누적 합 배열 `S`의 정의에 따라 다음이 성립합니다.

* $S[j] = \sum_{k=0}^{j} A[k] = A[0] + A[1] + \dots + A[j]$
* $S[i-1] = \sum_{k=0}^{i-1} A[k] = A[0] + A[1] + \dots + A[i-1]$

이제 $S[j]$에서 $S[i-1]$을 빼보겠습니다.

$$S[j] - S[i-1] = (A[0] + \dots + A[i-1] + A[i] + \dots + A[j]) - (A[0] + \dots + A[i-1])$$

우변에서 $(A[0] + \dots + A[i-1])$ 항들이 서로 소거되어 다음과 같은 결과만 남게 됩니다.

$$S[j] - S[i-1] = A[i] + \dots + A[j]$$

이는 정확히 우리가 구하고자 했던 `A`의 `i`부터 `j`까지의 구간 합과 일치합니다.

$$\therefore \sum_{k=i}^{j} A[k] = S[j] - S[i-1]$$

따라서 누적 합 배열을 미리 계산해두면, 어떤 길이의 구간 합이든 단 한 번의 뺄셈 연산(`O(1)`)으로 정확하게 구할 수 있음이 증명됩니다. ✅