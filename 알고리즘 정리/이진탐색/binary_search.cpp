#include <iostream>
using namespace std;

int binary_search(int *arr, int start, int end, int fv);
int binary_nonrecursive(int *arr, int start, int end, int fv);

int main(void) {

    int arr[100];
    // ì´ì§„ íƒìƒ‰ì€ ë°˜ë“œì‹œ ì •ë ¬ëœ ë°°ì—´ì„ ëŒ€ìƒìœ¼ë¡œ í•´ì•¼ í•©ë‹ˆë‹¤.
    for(int i = 0; i < 100; i++) {
        arr[i] = i;
    }

    int fv = 0;
    cout << "ì°¾ì„ ê°’ì„ ì…ë ¥í•˜ì„¸ìš” : ";
    cin >> fv;

    int rv = binary_search(arr, 0, 99, fv);
    int rv2 = binary_nonrecursive(arr, 0, 99, fv);
    
    cout << "ì¬ê·€ ë°©ì‹ ê²°ê³¼: " << rv << ", ë°˜ë³µ ë°©ì‹ ê²°ê³¼: " << rv2 << endl;

    return 0;
}

/**
 * @brief ì¬ê·€ í˜¸ì¶œì„ ì´ìš©í•œ ì´ì§„ íƒìƒ‰ í•¨ìˆ˜ ğŸ”
 * @param arr ì •ë ¬ëœ ì›ë³¸ ë°°ì—´
 * @param start íƒìƒ‰ì„ ì‹œì‘í•  ì¸ë±ìŠ¤
 * @param end íƒìƒ‰ì„ ë§ˆì¹  ì¸ë±ìŠ¤
 * @param fv ì°¾ê³ ì í•˜ëŠ” ê°’
 * @return ê°’ì´ ìˆìœ¼ë©´ í•´ë‹¹ ì¸ë±ìŠ¤ë¥¼, ì—†ìœ¼ë©´ -1ì„ ë°˜í™˜
 */
int binary_search(int *arr, int start, int end, int fv) {
    // ì¬ê·€ í˜¸ì¶œì˜ ì¢…ë£Œ ì¡°ê±´: ì‹œì‘ ì¸ë±ìŠ¤ê°€ ë ì¸ë±ìŠ¤ë³´ë‹¤ ì»¤ì§€ë©´
    // íƒìƒ‰ ë²”ìœ„ê°€ ë” ì´ìƒ ì—†ë‹¤ëŠ” ëœ»ì´ë¯€ë¡œ, ì°¾ëŠ” ê°’ì´ ë°°ì—´ì— ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    if (start > end) {
        return -1;
    }

    // íƒìƒ‰ ë²”ìœ„ì˜ ì¤‘ê°„ ì¸ë±ìŠ¤ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
    // (start + end)ê°€ intì˜ í‘œí˜„ ë²”ìœ„ë¥¼ ë„˜ëŠ” ì˜¤ë²„í”Œë¡œìš°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´
    // int mid = start + (end - start) / 2; ì™€ ê°™ì´ ê³„ì‚°í•˜ëŠ” ê²ƒì´ ë” ì•ˆì „í•©ë‹ˆë‹¤.
    int mid = (start + end) / 2;

    if (arr[mid] == fv) { // 1. ì¤‘ê°„ ê°’ì´ ì°¾ìœ¼ë ¤ëŠ” ê°’ê³¼ ê°™ì€ ê²½ìš°
        return mid; // ê°’ì„ ì°¾ì•˜ìœ¼ë¯€ë¡œ í•´ë‹¹ ì¸ë±ìŠ¤ë¥¼ ë°˜í™˜í•˜ê³  ì¢…ë£Œ
    } else if (arr[mid] < fv) { // 2. ì¤‘ê°„ ê°’ì´ ì°¾ìœ¼ë ¤ëŠ” ê°’ë³´ë‹¤ ì‘ì€ ê²½ìš°
        // ì°¾ëŠ” ê°’ì€ ì¤‘ê°„ ì§€ì ì˜ ì˜¤ë¥¸ìª½ì— ìˆì„ ê²ƒì´ë¯€ë¡œ, íƒìƒ‰ ë²”ìœ„ë¥¼ ì˜¤ë¥¸ìª½ ì ˆë°˜ìœ¼ë¡œ ì¢í™ë‹ˆë‹¤.
        return binary_search(arr, mid + 1, end, fv); // mid ë‹¤ìŒ ìœ„ì¹˜ë¶€í„° endê¹Œì§€ ì¬ê·€ í˜¸ì¶œ
    } else { // 3. ì¤‘ê°„ ê°’ì´ ì°¾ìœ¼ë ¤ëŠ” ê°’ë³´ë‹¤ í° ê²½ìš°
        // ì°¾ëŠ” ê°’ì€ ì¤‘ê°„ ì§€ì ì˜ ì™¼ìª½ì— ìˆì„ ê²ƒì´ë¯€ë¡œ, íƒìƒ‰ ë²”ìœ„ë¥¼ ì™¼ìª½ ì ˆë°˜ìœ¼ë¡œ ì¢í™ë‹ˆë‹¤.
        return binary_search(arr, start, mid - 1, fv); // startë¶€í„° mid ì´ì „ ìœ„ì¹˜ê¹Œì§€ ì¬ê·€ í˜¸ì¶œ
    }
}

/**
 * @brief ë°˜ë³µë¬¸(while)ì„ ì´ìš©í•œ ì´ì§„ íƒìƒ‰ í•¨ìˆ˜ ğŸ”„
 * @param arr ì •ë ¬ëœ ì›ë³¸ ë°°ì—´
 * @param start íƒìƒ‰ì„ ì‹œì‘í•  ì¸ë±ìŠ¤
 * @param end íƒìƒ‰ì„ ë§ˆì¹  ì¸ë±ìŠ¤
 * @param fv ì°¾ê³ ì í•˜ëŠ” ê°’
 * @return ê°’ì´ ìˆìœ¼ë©´ í•´ë‹¹ ì¸ë±ìŠ¤ë¥¼, ì—†ìœ¼ë©´ -1ì„ ë°˜í™˜
 */
int binary_nonrecursive(int *arr, int start, int end, int fv) {
    // while(1)ì€ ë¬´í•œ ë£¨í”„ì…ë‹ˆë‹¤. ë£¨í”„ ë‚´ì—ì„œ returnì„ ë§Œë‚˜ì•¼ ì¢…ë£Œë©ë‹ˆë‹¤.
    // ì¼ë°˜ì ìœ¼ë¡œëŠ” while(start <= end) ì™€ ê°™ì´ ì¡°ê±´ì„ ëª…ì‹œí•˜ëŠ” ê²ƒì´ ë” ì§ê´€ì ì…ë‹ˆë‹¤.
    while(start <= end) { 
        int mid = (start + end) / 2; // íƒìƒ‰ ë²”ìœ„ì˜ ì¤‘ê°„ ì¸ë±ìŠ¤ ê³„ì‚°

        if(arr[mid] == fv) { // 1. ì¤‘ê°„ ê°’ì´ ì°¾ìœ¼ë ¤ëŠ” ê°’ê³¼ ê°™ì€ ê²½ìš°
            return mid; // ê°’ì„ ì°¾ì•˜ìœ¼ë¯€ë¡œ í•´ë‹¹ ì¸ë±ìŠ¤ë¥¼ ë°˜í™˜í•˜ê³  ë£¨í”„ ì¢…ë£Œ
        } else if (arr[mid] < fv) { // 2. ì¤‘ê°„ ê°’ì´ ì°¾ìœ¼ë ¤ëŠ” ê°’ë³´ë‹¤ ì‘ì€ ê²½ìš°
            // ì˜¤ë¥¸ìª½ ë¶€ë¶„ì„ íƒìƒ‰í•˜ê¸° ìœ„í•´ ì‹œì‘ì ì„ mid ë‹¤ìŒìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
            start = mid + 1;
        } else { // 3. ì¤‘ê°„ ê°’ì´ ì°¾ìœ¼ë ¤ëŠ” ê°’ë³´ë‹¤ í° ê²½ìš°
            // ì™¼ìª½ ë¶€ë¶„ì„ íƒìƒ‰í•˜ê¸° ìœ„í•´ ëì ì„ mid ì´ì „ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
            end = mid - 1;
        }
    }
    
    // while ë£¨í”„ê°€ ì¢…ë£Œë˜ì—ˆë‹¤ëŠ” ê²ƒì€ start > end ê°€ ë˜ì–´
    // íƒìƒ‰ ë²”ìœ„ ë‚´ì— ê°’ì´ ì—†ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.
    return -1;
}