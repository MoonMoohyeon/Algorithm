## 냅색(Knapsack) 알고리즘 해설 및 증명

### 1\. 알고리즘 해설

\*\*0/1 냅색 문제(0/1 Knapsack Problem)\*\*는 DP의 대표적인 예시입니다. 문제는 다음과 같이 정의됩니다.

> $N$개의 물건이 있고, 각 물건은 무게($w\_i$)와 가치($v\_i$)를 가진다. 이 물건들을 용량이 $K$인 배낭에 담으려 할 때, 담은 물건들의 가치 합이 최대가 되도록 하려면 어떤 물건들을 담아야 하는가? (단, 각 물건은 통째로 담거나(1) 아예 담지 않거나(0)만 가능하다.)

이 문제는 \*\*최적 부분 구조(Optimal Substructure)\*\*와 \*\*중복되는 부분 문제(Overlapping Subproblems)\*\*라는 DP의 두 가지 핵심 조건을 만족합니다.

1.  **최적 부분 구조:** `$i$번째 물건까지 고려하고 용량이 $w$인 배낭`의 최적해는 `$i-1$번째 물건까지 고려한 상황`의 최적해를 포함하고 있습니다.
2.  **중복되는 부분 문제:** `DP[i-1][w - weights[i]]`와 같은 동일한 부분 문제가 여러 번 호출됩니다.

이러한 특성 때문에 DP를 사용하여 효율적으로 문제를 해결할 수 있습니다.

#### DP 상태 정의 및 점화식

  - **상태 정의:** $DP[i][w]$ = "$i$번째 물건까지 고려하고, 배낭의 현재 허용 무게가 $w$일 때 얻을 수 있는 최대 가치"

  - **점화식:** $i$번째 물건을 넣을지 말지 결정하는 두 가지 경우를 생각합니다.

    1.  **$i$번째 물건을 넣지 않는 경우:**
        최대 가치는 $i-1$개의 물건만으로 무게 $w$를 채웠을 때의 최대 가치와 같습니다.

          - $DP[i-1][w]$

    2.  **$i$번째 물건을 넣는 경우 (단, $w \\ge weights[i]$ 이어야 함):**
        $i$번째 물건의 가치($values[i]$) + ($i-1$개의 물건으로, $i$번째 물건의 무게를 뺀 나머지 용량 $w - weights[i]$를 채웠을 때의 최대 가치)

          - $values[i] + DP[i-1][w - weights[i]]$

    따라서 $DP[i][w]$는 이 두 가지 경우 중 더 큰 값으로 결정됩니다.

    $$
    $$$$DP[i][w] =
    \\begin{cases}
    DP[i-1][w] & \\text{if } weights[i] \> w \\
    \\max(DP[i-1][w], \\text{ } values[i] + DP[i-1][w - weights[i]]) & \\text{if } weights[i] \\le w
    \\end{cases}

    $$
    $$$$
    $$
  - **초기값:** $DP[0][w] = 0$, $DP[i][0] = 0$ (물건이 없거나 용량이 없으면 가치는 0)

  - **최종 답:** 모든 물건($N$)을 고려하고 최대 용량($K$)일 때의 가치인 $DP[N][K]$가 최종 답이 됩니다.

### 2\. 간단한 정확성 증명 (수학적 귀납법)

점화식이 어떻게 항상 최적해를 보장하는지 수학적 귀납법을 통해 간단히 증명할 수 있습니다.

  - **명제 $P(i)$:** "$i$번째 물건까지의 계산이 끝났을 때, 모든 $w \\in [0, K]$에 대해 $DP[i][w]$는 $1...i$번 물건을 사용하고 용량이 $w$일 때의 최적해이다."

<!-- end list -->

1.  **기저 단계 (Base Case):**
    $i=0$일 때, $DP[0][w] = 0$입니다. 아무 물건도 고려하지 않았을 때 모든 용량에서의 최대 가치는 0이므로 명제 $P(0)$은 참입니다.

2.  **귀납적 가정 (Inductive Hypothesis):**
    $k \< N$인 어떤 $k$에 대해 명제 $P(k)$가 참이라고 가정합니다. 즉, $DP[k][w]$는 $1...k$번 물건에 대한 모든 용량 $w$에서의 최적해를 올바르게 담고 있습니다.

3.  **귀납 단계 (Inductive Step):**
    명제 $P(k+1)$이 참임을 보여야 합니다. 즉, $DP[k+1][w]$가 $1...k+1$번 물건에 대한 최적해인지 증명해야 합니다.
    용량 $w$에서 $1...k+1$번 물건을 사용한 최적해는 다음 두 가지 경우 중 하나입니다.

      - **Case A: 최적해가 $k+1$번 물건을 포함하지 않는 경우**
        이때의 최대 가치는 $1...k$번 물건만을 사용해 용량 $w$를 채우는 최적해와 같습니다. 귀납적 가정에 의해 이 값은 $DP[k][w]$입니다.
      - **Case B: 최적해가 $k+1$번 물건을 포함하는 경우**
        이때의 최대 가치는 ($k+1$번 물건의 가치) + ($1...k$번 물건을 사용해 나머지 용량 $w-weights[k+1]$를 채우는 최적해) 입니다. 귀납적 가정에 의해 이 값은 $values[k+1] + DP[k][w-weights[k+1]]$입니다.

    우리의 점화식 `DP[k+1][w] = max(Case A, Case B)`는 논리적으로 가능한 모든 최적해의 경우를 고려하여 그중 최댓값을 선택합니다. 따라서 $DP[k+1][w]$는 $1...k+1$번 물건을 사용한 용량 $w$에서의 최적해임이 보장됩니다.

**결론:**
기저 단계가 참이고, $P(k)$가 참일 때 $P(k+1)$도 참이므로, 수학적 귀납법에 의해 모든 $i \\in [0, N]$에 대해 명제 $P(i)$는 참입니다. 따라서 최종적으로 $DP[N][K]$는 문제의 정답(최적해)을 담고 있음이 증명됩니다. ✅